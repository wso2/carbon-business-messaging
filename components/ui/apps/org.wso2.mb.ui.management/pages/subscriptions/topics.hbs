{{layout "org.wso2.carbon.uuf.sample.foundation.main"}}

{{#fillZone "content"}}
    <h1>Topic Subscriptions</h1>
    <hr/>
    <ul class="tiles">
        {{#each protocols}}
            <li class="square">
                <a class="btn square-element" href="{{@app.context}}/subscriptions/topics?protocol={{.}}">
                <span class="icon fw-stack">
                    <i class="fw fw-ring fw-stack-2x"></i>
                    <i class="fw fw-list fw-stack-1x"></i>
                </span>
                    {{.}}
                </a>
            </li>
        {{/each}}
    </ul>
    <br class="spacer">
    <div class="page-header">
        <p class="lead">Temporary Topic Subscriptions</p>
    </div>
    <table class="table table-responsive table-striped" id="topic-active-list-table">
        <thead>
        <tr>
            <th>#</th>
            <th>ID</th>
            <th>Number of Messages</th>
            <th>Active</th>
            <th>Owner Node ID</th>
            <th>Updated Time</th>
            <th>Operations</th>
        </tr>
        </thead>
        <tbody>
        {{#each subscriptions}}
            <tr>
                <td>{{@index_1}}</td>
                <td>{{targetQueue}}</td>
                <td>{{lookup ../messageCountPerSubscription @index}}</td>
                <td></td>
                <td>{{subscribedNode}}</td>
                <td>{{subscribeTime}}</td>
                <td></td>
            </tr>
        {{/each}}
        </tbody>
    </table>
    <br class="spacer">
    <div class="page-header">
        <p class="lead">Durable Topic Subscriptions - Active</p>
    </div>
    <table class="table table-responsive table-striped" id="durable-active-list-table">
        <thead>
        <tr>
            <th>#</th>
            <th>ID</th>
            <th>Number of Messages</th>
            <th>Owner Node ID</th>
            <th>Updated Time</th>
            <th>Operations</th>
        </tr>
        </thead>
        <tbody>
        {{#each activeDurableSubscriptions}}
            <tr>
                <td>{{@index_1}}</td>
                <td>{{targetQueue}}</td>
                <td>{{lookup ../messageCountPerStorageQueue storageQueueName}}</td>
                <td>{{subscribedNode}}</td>
                <td>{{subscribeTime}}</td>
                <td></td>
            </tr>
        {{/each}}
        </tbody>
    </table>
    <br class="spacer">
    <div class="page-header">
        <p class="lead">Durable Topic Subscriptions - Inactive</p>
    </div>
    <table class="table table-responsive table-striped" id="durable-inactive-list-table">
        <thead>
        <tr>
            <th>#</th>
            <th>ID</th>
            <th>Number of Messages</th>
            <th>Owner Node ID</th>
            <th>Updated Time</th>
            <th>Operations</th>
        </tr>
        </thead>
        <tbody>
        {{#each inactiveDurableSubscriptions}}
            <tr>
                <td>{{@index_1}}</td>
                <td>{{targetQueue}}</td>
                <td>{{lookup ../messageCountPerStorageQueue storageQueueName}}</td>
                <td>{{subscribedNode}}</td>
                <td>{{subscribeTime}}</td>
                <td></td>
            </tr>
        {{/each}}
        </tbody>
    </table>
{{/fillZone}}
